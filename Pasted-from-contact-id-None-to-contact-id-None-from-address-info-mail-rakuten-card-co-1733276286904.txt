from_contact_id': None, 'to_contact_id': None, 'from_address': '楽天カード株式会社 <info@mail.rakuten-card.co.jp>', 'to_address': '<makoto@team240.com>', 'subject': '【本日開始】もれなく400ポイント！いつでもEdyチャージでプレゼント♪【楽天カード通信】', 'body': '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\r\n<html>\r\n<head>\r\n<meta http-equiv="Content-Type" content="text/html; charset=IS ... (15863 characters truncated) ... w.rakuten-card.co.jp/</a><br>\r\n&copy; Rakuten Card Co., Ltd.</font></td>\r\n   </tr>\r\n  </tbody>\r\n </table>\r\n</div>\r\n</body>\r\n</html>\r\n', 'date': datetime.datetime(2016, 8, 16, 19, 4, 38, tzinfo=datetime.timezone(datetime.timedelta(seconds=32400))), 'is_sent': False, 'folder': 'INBOX', 'last_sync': datetime.datetime(2024, 12, 4, 1, 37, 13, 127008)}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2024-12-04 01:37:14,094 - mailchat - ERROR - Error processing folder INBOX: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.ProgramLimitExceeded) index row size 5904 exceeds btree version 4 maximum 2704 for index "idx_email_message_content"
DETAIL:  Index row references tuple (15,3) in relation "email_message".
HINT:  Values larger than 1/3 of a buffer page cannot be indexed.
Consider a function index of an MD5 hash of the value, or use full text indexing.

[SQL: INSERT INTO email_message (message_id, from_contact_id, to_contact_id, from_address, to_address, subject, body, date, is_sent, folder, last_sync) VALUES (%(message_id)s, %(from_contact_id)s, %(to_contact_id)s, %(from_address)s, %(to_address)s, %(subject)s, %(body)s, %(date)s, %(is_sent)s, %(folder)s, %(last_sync)s) RETURNING email_message.id]
[parameters: {'message_id': '<C_M_M_I_D.11_0_923930_0_0.133768.1471341878@tc.api.rakuten-card.co.jp>', 'from_contact_id': None, 'to_contact_id': None, 'from_address': '楽天カード株式会社 <info@mail.rakuten-card.co.jp>', 'to_address': '<makoto@team240.com>', 'subject': '【本日開始】もれなく400ポイント！いつでもEdyチャージでプレゼント♪【楽天カード通信】', 'body': '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\r\n<html>\r\n<head>\r\n<meta http-equiv="Content-Type" content="text/html; charset=IS ... (15863 characters truncated) ... w.rakuten-card.co.jp/</a><br>\r\n&copy; Rakuten Card Co., Ltd.</font></td>\r\n   </tr>\r\n  </tbody>\r\n </table>\r\n</div>\r\n</body>\r\n</html>\r\n', 'date': datetime.datetime(2016, 8, 16, 19, 4, 38, tzinfo=datetime.timezone(datetime.timedelta(seconds=32400))), 'is_sent': False, 'folder': 'INBOX', 'last_sync': datetime.datetime(2024, 12, 4, 1, 37, 13, 127008)}]
(Background on this error at: https://sqlalche.me/e/20/e3q8) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2024-12-04 01:37:14,674 - mailchat - DEBUG - Connection state changed to DISCONNECTED
2024-12-04 01:37:14,675 - mailchat - DEBUG - Total new emails synchronized: 0
2024-12-04 01:37:14,675 - mailchat - DEBUG - Background sync completed: 0 new emails
2024-12-04 01:37:14,675 - mailchat - DEBUG - Background handler disconnected
